import{r,h as t,g as n}from"./p-3c1deafe.js";import{c as i,a as e,u as o}from"./p-74149bb1.js";const s=o(i((function(r,t){
/*!

 diff v4.0.1

Software License Agreement (BSD License)

Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

All rights reserved.

Redistribution and use of this software in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of Kevin Decker nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
@license
*/
!function(r){function t(){}function n(r,t,n,i,e){for(var o=0,s=t.length,f=0,a=0;o<s;o++){var u=t[o];if(u.removed){if(u.value=r.join(i.slice(a,a+u.count)),a+=u.count,o&&t[o-1].added){var c=t[o-1];t[o-1]=t[o],t[o]=c}}else{if(!u.added&&e){var l=n.slice(f,f+u.count);l=l.map((function(r,t){var n=i[a+t];return n.length>r.length?n:r})),u.value=r.join(l)}else u.value=r.join(n.slice(f,f+u.count));f+=u.count,u.added||(a+=u.count)}}var v=t[s-1];return s>1&&"string"==typeof v.value&&(v.added||v.removed)&&r.equals("",v.value)&&(t[s-2].value+=v.value,t.pop()),t}function i(r){return{newPos:r.newPos,components:r.components.slice(0)}}t.prototype={diff:function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.callback;"function"==typeof e&&(o=e,e={}),this.options=e;var s=this;function f(r){return o?(setTimeout((function(){o(void 0,r)}),0),!0):r}r=this.castInput(r),t=this.castInput(t),r=this.removeEmpty(this.tokenize(r));var a=(t=this.removeEmpty(this.tokenize(t))).length,u=r.length,c=1,l=a+u,v=[{newPos:-1,components:[]}],d=this.extractCommon(v[0],t,r,0);if(v[0].newPos+1>=a&&d+1>=u)return f([{value:this.join(t),count:t.length}]);function h(){for(var e=-1*c;e<=c;e+=2){var o=void 0,l=v[e-1],d=v[e+1],h=(d?d.newPos:0)-e;l&&(v[e-1]=void 0);var m=l&&l.newPos+1<a,p=d&&0<=h&&h<u;if(m||p){if(!m||p&&l.newPos<d.newPos?(o=i(d),s.pushComponent(o.components,void 0,!0)):((o=l).newPos++,s.pushComponent(o.components,!0,void 0)),h=s.extractCommon(o,t,r,e),o.newPos+1>=a&&h+1>=u)return f(n(s,o.components,t,r,s.useLongestToken));v[e]=o}else v[e]=void 0}c++}if(o)!function r(){setTimeout((function(){if(c>l)return o();h()||r()}),0)}();else for(;c<=l;){var m=h();if(m)return m}},pushComponent:function(r,t,n){var i=r[r.length-1];i&&i.added===t&&i.removed===n?r[r.length-1]={count:i.count+1,added:t,removed:n}:r.push({count:1,added:t,removed:n})},extractCommon:function(r,t,n,i){for(var e=t.length,o=n.length,s=r.newPos,f=s-i,a=0;s+1<e&&f+1<o&&this.equals(t[s+1],n[f+1]);)s++,f++,a++;return a&&r.components.push({count:a}),r.newPos=s,f},equals:function(r,t){return this.options.comparator?this.options.comparator(r,t):r===t||this.options.ignoreCase&&r.toLowerCase()===t.toLowerCase()},removeEmpty:function(r){for(var t=[],n=0;n<r.length;n++)r[n]&&t.push(r[n]);return t},castInput:function(r){return r},tokenize:function(r){return r.split("")},join:function(r){return r.join("")}};var e=new t;function o(r,t){if("function"==typeof r)t.callback=r;else if(r)for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}var s=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,f=/\S/,a=new t;a.equals=function(r,t){return this.options.ignoreCase&&(r=r.toLowerCase(),t=t.toLowerCase()),r===t||this.options.ignoreWhitespace&&!f.test(r)&&!f.test(t)},a.tokenize=function(r){for(var t=r.split(/(\s+|[()[\]{}'"]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&s.test(t[n])&&s.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var u=new t;function c(r,t,n){return u.diff(r,t,n)}u.tokenize=function(r){var t=[],n=r.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var e=n[i];i%2&&!this.options.newlineIsToken?t[t.length-1]+=e:(this.options.ignoreWhitespace&&(e=e.trim()),t.push(e))}return t};var l=new t;l.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var v=new t;function d(r){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function h(r){return function(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}v.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};var m=Object.prototype.toString,p=new t;function b(r,t,n,i,e){var o,s;for(t=t||[],n=n||[],i&&(r=i(e,r)),o=0;o<t.length;o+=1)if(t[o]===r)return n[o];if("[object Array]"===m.call(r)){for(t.push(r),s=new Array(r.length),n.push(s),o=0;o<r.length;o+=1)s[o]=b(r[o],t,n,i,e);return t.pop(),n.pop(),s}if(r&&r.toJSON&&(r=r.toJSON()),"object"===d(r)&&null!==r){t.push(r),n.push(s={});var f,a=[];for(f in r)r.hasOwnProperty(f)&&a.push(f);for(a.sort(),o=0;o<a.length;o+=1)s[f=a[o]]=b(r[f],t,n,i,f);t.pop(),n.pop()}else s=r;return s}p.useLongestToken=!0,p.tokenize=u.tokenize,p.castInput=function(r){var t=this.options,n=t.undefinedReplacement,i=t.stringifyReplacer,e=void 0===i?function(r,t){return void 0===t?n:t}:i;return"string"==typeof r?r:JSON.stringify(b(r,null,null,e),e,"  ")},p.equals=function(r,n){return t.prototype.equals.call(p,r.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"))};var g=new t;function w(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.split(/\r\n|[\n\v\f\r\x85]/),i=r.match(/\r\n|[\n\v\f\r\x85]/g)||[],e=[],o=0;function s(){var r={};for(e.push(r);o<n.length;){var i=n[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(i))break;var s=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(i);s&&(r.index=s[1]),o++}for(f(r),f(r),r.hunks=[];o<n.length;){var u=n[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(u))break;if(/^@@/.test(u))r.hunks.push(a());else{if(u&&t.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(u));o++}}}function f(r){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[o]);if(t){var i="---"===t[1]?"old":"new",e=t[2].split("\t",2),s=e[0].replace(/\\\\/g,"\\");/^".*"$/.test(s)&&(s=s.substr(1,s.length-2)),r[i+"FileName"]=s,r[i+"Header"]=(e[1]||"").trim(),o++}}function a(){for(var r=o,e=n[o++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),s={oldStart:+e[1],oldLines:+e[2]||1,newStart:+e[3],newLines:+e[4]||1,lines:[],linedelimiters:[]},f=0,a=0;o<n.length&&!(0===n[o].indexOf("--- ")&&o+2<n.length&&0===n[o+1].indexOf("+++ ")&&0===n[o+2].indexOf("@@"));o++){var u=0==n[o].length&&o!=n.length-1?" ":n[o][0];if("+"!==u&&"-"!==u&&" "!==u&&"\\"!==u)break;s.lines.push(n[o]),s.linedelimiters.push(i[o]||"\n"),"+"===u?f++:"-"===u?a++:" "===u&&(f++,a++)}if(f||1!==s.newLines||(s.newLines=0),a||1!==s.oldLines||(s.oldLines=0),t.strict){if(f!==s.newLines)throw new Error("Added line count did not match for hunk at line "+(r+1));if(a!==s.oldLines)throw new Error("Removed line count did not match for hunk at line "+(r+1))}return s}for(;o<n.length;)s();return e}function x(r,t,n){var i=!0,e=!1,o=!1,s=1;return function f(){if(i&&!o){if(e?s++:i=!1,r+s<=n)return s;o=!0}if(!e)return o||(i=!0),t<=r-s?-s++:(e=!0,f())}}function y(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t&&(t=w(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var i,e,o=r.split(/\r\n|[\n\v\f\r\x85]/),s=r.match(/\r\n|[\n\v\f\r\x85]/g)||[],f=t.hunks,a=n.compareLine||function(r,t,n,i){return t===i},u=0,c=n.fuzzFactor||0,l=0,v=0;function d(r,t){for(var n=0;n<r.lines.length;n++){var i=r.lines[n],e=i.length>0?i[0]:" ",s=i.length>0?i.substr(1):i;if(" "===e||"-"===e){if(!a(t+1,o[t],e,s)&&++u>c)return!1;t++}}return!0}for(var h=0;h<f.length;h++){for(var m=f[h],p=o.length-m.oldLines,b=0,g=v+m.oldStart-1,y=x(g,l,p);void 0!==b;b=y())if(d(m,g+b)){m.offset=v+=b;break}if(void 0===b)return!1;l=m.offset+m.oldStart+m.oldLines}for(var k=0,C=0;C<f.length;C++){var S=f[C],L=S.oldStart+S.offset+k-1;k+=S.newLines-S.oldLines,L<0&&(L=0);for(var $=0;$<S.lines.length;$++){var A=S.lines[$],N=A.length>0?A[0]:" ",j=A.length>0?A.substr(1):A,E=S.linedelimiters[$];if(" "===N)L++;else if("-"===N)o.splice(L,1),s.splice(L,1);else if("+"===N)o.splice(L,0,j),s.splice(L,0,E),L++;else if("\\"===N){var W=S.lines[$-1]?S.lines[$-1][0]:null;"+"===W?i=!0:"-"===W&&(e=!0)}}}if(i)for(;!o[o.length-1];)o.pop(),s.pop();else e&&(o.push(""),s.push("\n"));for(var z=0;z<o.length-1;z++)o[z]=o[z]+s[z];return o.join("")}function k(r,t,n,i,e,o,s){s||(s={}),void 0===s.context&&(s.context=4);var f=c(n,i,s);function a(r){return r.map((function(r){return" "+r}))}f.push({value:"",lines:[]});for(var u=[],l=0,v=0,d=[],m=1,p=1,b=function(r){var t=f[r],e=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=e,t.added||t.removed){var o;if(!l){var c=f[r-1];l=m,v=p,c&&(d=s.context>0?a(c.lines.slice(-s.context)):[],l-=d.length,v-=d.length)}(o=d).push.apply(o,h(e.map((function(r){return(t.added?"+":"-")+r})))),t.added?p+=e.length:m+=e.length}else{if(l)if(e.length<=2*s.context&&r<f.length-2){var b;(b=d).push.apply(b,h(a(e)))}else{var g,w=Math.min(e.length,s.context);(g=d).push.apply(g,h(a(e.slice(0,w))));var x={oldStart:l,oldLines:m-l+w,newStart:v,newLines:p-v+w,lines:d};if(r>=f.length-2&&e.length<=s.context){var y=/\n$/.test(n),k=/\n$/.test(i),C=0==e.length&&d.length>x.oldLines;!y&&C&&d.splice(x.oldLines,0,"\\ No newline at end of file"),(y||C)&&k||d.push("\\ No newline at end of file")}u.push(x),l=0,v=0,d=[]}m+=e.length,p+=e.length}},g=0;g<f.length;g++)b(g);return{oldFileName:r,newFileName:t,oldHeader:e,newHeader:o,hunks:u}}function C(r,t,n,i,e,o,s){var f=k(r,t,n,i,e,o,s),a=[];r==t&&a.push("Index: "+r),a.push("==================================================================="),a.push("--- "+f.oldFileName+(void 0===f.oldHeader?"":"\t"+f.oldHeader)),a.push("+++ "+f.newFileName+(void 0===f.newHeader?"":"\t"+f.newHeader));for(var u=0;u<f.hunks.length;u++){var c=f.hunks[u];a.push("@@ -"+c.oldStart+","+c.oldLines+" +"+c.newStart+","+c.newLines+" @@"),a.push.apply(a,c.lines)}return a.join("\n")+"\n"}function S(r,t){if(t.length>r.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function L(r,t){if("string"==typeof r){if(/^@@/m.test(r)||/^Index:/m.test(r))return w(r)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return k(void 0,void 0,t,r)}return r}function $(r){return r.newFileName&&r.newFileName!==r.oldFileName}function A(r,t,n){return t===n?t:(r.conflict=!0,{mine:t,theirs:n})}function N(r,t){return r.oldStart<t.oldStart&&r.oldStart+r.oldLines<t.oldStart}function j(r,t){return{oldStart:r.oldStart,oldLines:r.oldLines,newStart:r.newStart+t,newLines:r.newLines,lines:r.lines}}function E(r,t,n,i,e){var o={offset:t,lines:n,index:0},s={offset:i,lines:e,index:0};for(O(r,o,s),O(r,s,o);o.index<o.lines.length&&s.index<s.lines.length;){var f=o.lines[o.index],a=s.lines[s.index];if("-"!==f[0]&&"+"!==f[0]||"-"!==a[0]&&"+"!==a[0])if("+"===f[0]&&" "===a[0]){var u;(u=r.lines).push.apply(u,h(M(o)))}else if("+"===a[0]&&" "===f[0]){var c;(c=r.lines).push.apply(c,h(M(s)))}else"-"===f[0]&&" "===a[0]?z(r,o,s):"-"===a[0]&&" "===f[0]?z(r,s,o,!0):f===a?(r.lines.push(f),o.index++,s.index++):D(r,M(o),M(s));else W(r,o,s)}I(r,o),I(r,s),function(r){var t=function r(t){var n=0,i=0;return t.forEach((function(t){if("string"!=typeof t){var e=r(t.mine),o=r(t.theirs);void 0!==n&&(e.oldLines===o.oldLines?n+=e.oldLines:n=void 0),void 0!==i&&(e.newLines===o.newLines?i+=e.newLines:i=void 0)}else void 0===i||"+"!==t[0]&&" "!==t[0]||i++,void 0===n||"-"!==t[0]&&" "!==t[0]||n++})),{oldLines:n,newLines:i}}(r.lines),n=t.oldLines,i=t.newLines;void 0!==n?r.oldLines=n:delete r.oldLines,void 0!==i?r.newLines=i:delete r.newLines}(r)}function W(r,t,n){var i,e,o=M(t),s=M(n);if(F(o)&&F(s)){var f,a;if(S(o,s)&&H(n,o,o.length-s.length))return void(f=r.lines).push.apply(f,h(o));if(S(s,o)&&H(t,s,s.length-o.length))return void(a=r.lines).push.apply(a,h(s))}else if((i=o).length===(e=s).length&&S(i,e)){var u;return void(u=r.lines).push.apply(u,h(o))}D(r,o,s)}function z(r,t,n,i){var e,o=M(t),s=function(r,t){for(var n=[],i=[],e=0,o=!1,s=!1;e<t.length&&r.index<r.lines.length;){var f=r.lines[r.index],a=t[e];if("+"===a[0])break;if(o=o||" "!==f[0],i.push(a),e++,"+"===f[0])for(s=!0;"+"===f[0];)n.push(f),f=r.lines[++r.index];a.substr(1)===f.substr(1)?(n.push(f),r.index++):s=!0}if("+"===(t[e]||"")[0]&&o&&(s=!0),s)return n;for(;e<t.length;)i.push(t[e++]);return{merged:i,changes:n}}(n,o);s.merged?(e=r.lines).push.apply(e,h(s.merged)):D(r,i?s:o,i?o:s)}function D(r,t,n){r.conflict=!0,r.lines.push({conflict:!0,mine:t,theirs:n})}function O(r,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var i=t.lines[t.index++];r.lines.push(i),t.offset++}}function I(r,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];r.lines.push(n)}}function M(r){for(var t=[],n=r.lines[r.index][0];r.index<r.lines.length;){var i=r.lines[r.index];if("-"===n&&"+"===i[0]&&(n="+"),n!==i[0])break;t.push(i),r.index++}return t}function F(r){return r.reduce((function(r,t){return r&&"-"===t[0]}),!0)}function H(r,t,n){for(var i=0;i<n;i++){var e=t[t.length-n+i].substr(1);if(r.lines[r.index+i]!==" "+e)return!1}return r.index+=n,!0}g.tokenize=function(r){return r.slice()},g.join=g.removeEmpty=function(r){return r},r.Diff=t,r.diffChars=function(r,t,n){return e.diff(r,t,n)},r.diffWords=function(r,t,n){return n=o(n,{ignoreWhitespace:!0}),a.diff(r,t,n)},r.diffWordsWithSpace=function(r,t,n){return a.diff(r,t,n)},r.diffLines=c,r.diffTrimmedLines=function(r,t,n){var i=o(n,{ignoreWhitespace:!0});return u.diff(r,t,i)},r.diffSentences=function(r,t,n){return l.diff(r,t,n)},r.diffCss=function(r,t,n){return v.diff(r,t,n)},r.diffJson=function(r,t,n){return p.diff(r,t,n)},r.diffArrays=function(r,t,n){return g.diff(r,t,n)},r.structuredPatch=k,r.createTwoFilesPatch=C,r.createPatch=function(r,t,n,i,e,o){return C(r,r,t,n,i,e,o)},r.applyPatch=y,r.applyPatches=function(r,t){"string"==typeof r&&(r=w(r));var n=0;!function i(){var e=r[n++];if(!e)return t.complete();t.loadFile(e,(function(r,n){if(r)return t.complete(r);var o=y(n,e,t);t.patched(e,o,(function(r){if(r)return t.complete(r);i()}))}))}()},r.parsePatch=w,r.merge=function(r,t,n){r=L(r,n),t=L(t,n);var i={};(r.index||t.index)&&(i.index=r.index||t.index),(r.newFileName||t.newFileName)&&($(r)?$(t)?(i.oldFileName=A(i,r.oldFileName,t.oldFileName),i.newFileName=A(i,r.newFileName,t.newFileName),i.oldHeader=A(i,r.oldHeader,t.oldHeader),i.newHeader=A(i,r.newHeader,t.newHeader)):(i.oldFileName=r.oldFileName,i.newFileName=r.newFileName,i.oldHeader=r.oldHeader,i.newHeader=r.newHeader):(i.oldFileName=t.oldFileName||r.oldFileName,i.newFileName=t.newFileName||r.newFileName,i.oldHeader=t.oldHeader||r.oldHeader,i.newHeader=t.newHeader||r.newHeader)),i.hunks=[];for(var e=0,o=0,s=0,f=0;e<r.hunks.length||o<t.hunks.length;){var a=r.hunks[e]||{oldStart:1/0},u=t.hunks[o]||{oldStart:1/0};if(N(a,u))i.hunks.push(j(a,s)),e++,f+=a.newLines-a.oldLines;else if(N(u,a))i.hunks.push(j(u,f)),o++,s+=u.newLines-u.oldLines;else{var c={oldStart:Math.min(a.oldStart,u.oldStart),oldLines:0,newStart:Math.min(a.newStart+s,u.oldStart+f),newLines:0,lines:[]};E(c,a.oldStart,a.lines,u.oldStart,u.lines),o++,e++,i.hunks.push(c)}}return i},r.convertChangesToDMP=function(r){for(var t,n=[],i=0;i<r.length;i++)n.push([(t=r[i]).added?1:t.removed?-1:0,t.value]);return n},r.convertChangesToXML=function(r){for(var t=[],n=0;n<r.length;n++){var i=r[n];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(i.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")},r.canonicalize=b,Object.defineProperty(r,"__esModule",{value:!0})}(t)}))),f=class{constructor(t){r(this,t),this.history=[],this.currentStep=0,this.o="",this.n="",this.currentJump=0,this.autoScroll=!1,this.showControls=!0,this.showLineControl=!0,this.controls=[],this.displayMode="all",this.refresh=()=>{this.currentStep=0,this.history=[],this.load(),this.onUpdate()},this.mergeCodes=(r,t,n)=>{let i=!1;const e=c(r).map((r,e)=>(r.added||r.removed||!i||(i=!1),e===t&&(n&&r.added&&(r.added=!1),!n&&r.removed&&(r.removed=!1),i=!0),i&&r.removed&&n&&(r.removed=!1,r.added=!1,r.value=void 0),i&&r.added&&n&&(r.removed=!1,r.added=!1),i&&r.added&&!n&&(r.removed=!1,r.added=!1,r.value=void 0),i&&r.removed&&!n&&(r.removed=!1,r.added=!1),r));this.history[this.currentStep]=this.diffData,this.currentStep+=1,this.history[this.currentStep]=e,this.diffData=e,this.onUpdate()},this.onUpdate=()=>{const r=this.diffData.reduce((r,t)=>void 0!==t.value?`${r}${t.value}`:r,""),t=!Boolean(this.diffData.find(r=>r.added||r.removed));this.mergeChange&&this.mergeChange(this.diffData,r,t)},this.undo=()=>{if(!this.history.length||0===this.currentStep)return!1;this.currentStep-=1,this.diffData=this.history[this.currentStep],this.onUpdate()},this.redo=()=>{const r=this.history.length;if(!r||this.currentStep>=r)return console.log(!1,this.currentStep,r),!1;this.currentStep+=1;const t=this.history[this.currentStep];t?this.diffData=t:this.currentStep-=1,this.onUpdate()},this.jump=r=>{const t=Array.from(this.el.shadowRoot.querySelectorAll("[data-group]")).pop();if(!t)return!1;let n=this.currentJump;r?n+=1:n-=1,n||r||(n=Number(t.dataset.group));const i=this.el.shadowRoot.querySelector(`[data-group="${n}"]`),e=this.el.shadowRoot.querySelector(".contentWrapper");if(!i)return this.currentJump=0,!1;const o=i.getBoundingClientRect(),s=e.getBoundingClientRect();e.scrollTo({behavior:"smooth",left:0,top:o.y-s.y+e.scrollTop}),this.currentJump=n}}oldVersionHandler(r){this.loadItem(r,"o"),this.setDiffData()}newVersionHandler(r){this.loadItem(r,"n"),this.setDiffData()}handleDisplayMode(){this.currentMode=this.displayMode}componentWillLoad(){this.currentMode=this.displayMode,this.load(),this.setDiffData()}componentDidLoad(){this.autoScroll&&this.jump(!0)}load(){this.loadItem(this.oldVersion,"o"),this.loadItem(this.newVersion,"n"),this.setDiffData()}setDiffData(){this.diffData=s.diffLines(this.o,this.n)}loadItem(r,t){if("string"!=typeof r){try{this[t]=JSON.stringify(r,null,2)}catch(n){console.log(n)}return!1}this[t]=r}render(){let r=c(this.diffData);"old"===this.currentMode&&(r=r.filter(r=>r.removed||!r.removed&&!r.added)),"new"===this.currentMode&&(r=r.filter(r=>r.added||!r.removed&&!r.added));const n=this.history.length,i=this.currentStep>0&&n>0,e=this.currentStep<n-1&&n>0;return t("arv-flex",{layout:"column",class:"root"},this.showControls&&t("arv-flex",{class:"controlWrapper",items:"center"},this.showLineControl&&t("arv-tooltip",{message:"refresh"},t("arv-button",{icon:"refresh",variant:"flat-icon",onClick:()=>this.refresh()})),t("arv-tooltip",{message:"Previous diff"},t("arv-button",{icon:"chevron_left",variant:"flat-icon",onClick:()=>this.jump(!1)})),t("arv-tooltip",{message:"Next diff"},t("arv-button",{icon:"chevron_right",variant:"flat-icon",onClick:()=>this.jump(!0)})),this.showLineControl&&[t("arv-tooltip",{message:"Undo"},t("arv-button",{disabled:!i,icon:"undo",variant:"flat-icon",buttonClick:()=>this.undo()})),t("arv-tooltip",{message:"Redo"},t("arv-button",{disabled:!e,icon:"redo",variant:"flat-icon",buttonClick:()=>this.redo()}))]),t("div",{class:"contentWrapper"},t(a,{diffData:r,mergeCodes:this.mergeCodes,showLineControl:this.showLineControl})))}get el(){return n(this)}static get watchers(){return{oldVersion:["oldVersionHandler"],newVersion:["newVersionHandler"],displayMode:["handleDisplayMode"]}}};function a({diffData:r,mergeCodes:n,showLineControl:i}){let e,o=0;return r.filter(r=>void 0!==r.value).map((r,s,f)=>{const a=!(c=r).added&&!c.removed;var c;!a&&e&&(o+=1);const l=!a&&e&&i;e=a;const v={plus:r.added,minus:r.removed,none:!r.added&&!r.removed,item:!0};return t("arv-flex",{layout:"column",class:{showLineControl:i},"data-group":o},l&&t("arv-flex",{class:"lineControl"},t("arv-divider",{"is-vertical":!0}),t("arv-text",{class:"lineButton current",onClick:()=>n(f,s,!1)},"Accept current"),t("arv-text",{class:"div"},"|"),t("arv-text",{class:"lineButton incoming",onClick:()=>n(f,s,!0)},"Accept incoming"),t("arv-divider",{"is-vertical":!0})),t("arv-flex",{class:v,items:"center"},t("arv-divider",{"is-vertical":!0}),t(u,{item:r,showLineControl:i}),t("arv-text",{class:"textWrapper"},r.value)))})}function u({item:r,showLineControl:n}){const i=r.added&&!0===n?"i":r.removed&&!0===n?"c":r.added?"+":r.removed?"-":null;return i?"-"===i||"+"===i?t("span",{class:"line-symbol"},i):t("arv-tooltip",{message:r.added?"Incoming":"Current",position:"right"},t("span",{class:"line-symbol letter-mode"},i)):t("div",{class:"space"})}function c(r){return JSON.parse(JSON.stringify(r))}f.style=":host,.root{display:block;width:100%;height:100%}.root{--font-size:0.8rem}.none .line-symbol{opacity:0}.item{display:block;padding:0 4px 0 0;-webkit-box-sizing:border-box;box-sizing:border-box}.item.minus{background-color:#ffc8c8}.item.plus{background-color:#c8ffcc}.line{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 8px;background-color:#efefef}.line-wrapper{width:80px;background-color:#efefef;--font-size:0.7rem}arv-button{--font-family:var(--font-family)}.controlWrapper{min-height:33px;max-height:33px;-ms-flex:1;flex:1}.contentWrapper{border-radius:var(--radius);background-color:var(--diff-bg, #fff);-ms-flex:1;flex:1;min-height:0%;overflow-y:scroll;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%}.textWrapper{--font-family:Courier;--word-break:break-all}.lineControl{background-color:var(--control-bg, #585858)}.lineButton{--dark-text-color:#f5f5f5;--font-size:0.7rem;cursor:pointer}.lineButton.current:hover{--dark-text-color:var(--lc-item-minus, #c8fff5)}.lineButton.incoming:hover{--dark-text-color:var(--lc-item-minus, #fcffc8)}.div{--dark-text-color:#cdcdcd;margin:0 4px}.showLineControl .item.minus{background-color:var(--lc-item-minus, #c8fff5)}.showLineControl .item.plus{background-color:var(--lc-item-plus, #fcffc8)}.space{width:4px}.letter-mode{cursor:auto}";export{f as arv_diff}